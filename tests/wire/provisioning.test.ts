// This file was auto-generated by Fern from our API Definition.

import * as Forum from "../../src/api/index";
import { ForumClient } from "../../src/Client";
import { mockServerPool } from "../mock-server/MockServerPool";

describe("ProvisioningClient", () => {
    test("list (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            data: { instances: [{ id: "id", name: "name", handle: "handle", createdAt: "2024-01-15T09:30:00Z" }] },
        };
        server
            .mockEndpoint()
            .get("/provisioning/instances")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.provisioning.list();
        expect(response).toEqual({
            data: {
                instances: [
                    {
                        id: "id",
                        name: "name",
                        handle: "handle",
                        createdAt: "2024-01-15T09:30:00Z",
                    },
                ],
            },
        });
    });

    test("list (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .get("/provisioning/instances")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.list();
        }).rejects.toThrow(Forum.UnauthorizedError);
    });

    test("list (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .get("/provisioning/instances")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.list();
        }).rejects.toThrow(Forum.NotFoundError);
    });

    test("list (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .get("/provisioning/instances")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.list();
        }).rejects.toThrow(Forum.InternalServerError);
    });

    test("create (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { name: "name", handle: "handle" };
        const rawResponseBody = {
            data: { id: "id", name: "name", handle: "handle", apiKey: "apiKey", createdAt: "2024-01-15T09:30:00Z" },
        };
        server
            .mockEndpoint()
            .post("/provisioning/instances")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.provisioning.create({
            name: "name",
            handle: "handle",
        });
        expect(response).toEqual({
            data: {
                id: "id",
                name: "name",
                handle: "handle",
                apiKey: "apiKey",
                createdAt: "2024-01-15T09:30:00Z",
            },
        });
    });

    test("create (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { name: "name", handle: "handle" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .post("/provisioning/instances")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.create({
                name: "name",
                handle: "handle",
            });
        }).rejects.toThrow(Forum.BadRequestError);
    });

    test("create (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { name: "name", handle: "handle" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .post("/provisioning/instances")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.create({
                name: "name",
                handle: "handle",
            });
        }).rejects.toThrow(Forum.UnauthorizedError);
    });

    test("create (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { name: "name", handle: "handle" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .post("/provisioning/instances")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.create({
                name: "name",
                handle: "handle",
            });
        }).rejects.toThrow(Forum.InternalServerError);
    });

    test("update (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle" };
        const rawResponseBody = { data: { name: "name", handle: "handle" } };
        server
            .mockEndpoint()
            .put("/provisioning/instances")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.provisioning.update({
            handle: "handle",
        });
        expect(response).toEqual({
            data: {
                name: "name",
                handle: "handle",
            },
        });
    });

    test("update (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .put("/provisioning/instances")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.update({
                handle: "handle",
            });
        }).rejects.toThrow(Forum.BadRequestError);
    });

    test("update (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .put("/provisioning/instances")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.update({
                handle: "handle",
            });
        }).rejects.toThrow(Forum.UnauthorizedError);
    });

    test("update (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .put("/provisioning/instances")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.update({
                handle: "handle",
            });
        }).rejects.toThrow(Forum.NotFoundError);
    });

    test("update (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .put("/provisioning/instances")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.update({
                handle: "handle",
            });
        }).rejects.toThrow(Forum.InternalServerError);
    });

    test("delete (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle" };
        const rawResponseBody = { data: { deleted: "deleted" } };
        server
            .mockEndpoint()
            .delete("/provisioning/instances")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.provisioning.delete({
            handle: "handle",
        });
        expect(response).toEqual({
            data: {
                deleted: "deleted",
            },
        });
    });

    test("delete (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .delete("/provisioning/instances")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.delete({
                handle: "handle",
            });
        }).rejects.toThrow(Forum.BadRequestError);
    });

    test("delete (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .delete("/provisioning/instances")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.delete({
                handle: "handle",
            });
        }).rejects.toThrow(Forum.UnauthorizedError);
    });

    test("delete (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .delete("/provisioning/instances")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.delete({
                handle: "handle",
            });
        }).rejects.toThrow(Forum.NotFoundError);
    });

    test("delete (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .delete("/provisioning/instances")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.delete({
                handle: "handle",
            });
        }).rejects.toThrow(Forum.InternalServerError);
    });

    test("getBilling (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            data: {
                instanceId: "instanceId",
                handle: "handle",
                plan: "FREE",
                status: "status",
                currentPeriodEnd: "2024-01-15T09:30:00Z",
                cancelAtPeriodEnd: true,
            },
        };
        server
            .mockEndpoint()
            .get("/provisioning/instances/billing")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.provisioning.getBilling({
            handle: "handle",
        });
        expect(response).toEqual({
            data: {
                instanceId: "instanceId",
                handle: "handle",
                plan: "FREE",
                status: "status",
                currentPeriodEnd: "2024-01-15T09:30:00Z",
                cancelAtPeriodEnd: true,
            },
        });
    });

    test("getBilling (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .get("/provisioning/instances/billing")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.getBilling({
                handle: "handle",
            });
        }).rejects.toThrow(Forum.UnauthorizedError);
    });

    test("getBilling (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .get("/provisioning/instances/billing")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.getBilling({
                handle: "handle",
            });
        }).rejects.toThrow(Forum.NotFoundError);
    });

    test("getBilling (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .get("/provisioning/instances/billing")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.getBilling({
                handle: "handle",
            });
        }).rejects.toThrow(Forum.InternalServerError);
    });

    test("changePlan (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", plan: "FREE" };
        const rawResponseBody = {
            data: { action: "checkout", plan: "plan", isAnnual: true, message: "message", url: "url" },
        };
        server
            .mockEndpoint()
            .post("/provisioning/instances/billing")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.provisioning.changePlan({
            handle: "handle",
            plan: "FREE",
        });
        expect(response).toEqual({
            data: {
                action: "checkout",
                plan: "plan",
                isAnnual: true,
                message: "message",
                url: "url",
            },
        });
    });

    test("changePlan (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", plan: "FREE" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .post("/provisioning/instances/billing")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.changePlan({
                handle: "handle",
                plan: "FREE",
            });
        }).rejects.toThrow(Forum.BadRequestError);
    });

    test("changePlan (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", plan: "FREE" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .post("/provisioning/instances/billing")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.changePlan({
                handle: "handle",
                plan: "FREE",
            });
        }).rejects.toThrow(Forum.UnauthorizedError);
    });

    test("changePlan (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", plan: "FREE" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .post("/provisioning/instances/billing")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.changePlan({
                handle: "handle",
                plan: "FREE",
            });
        }).rejects.toThrow(Forum.NotFoundError);
    });

    test("changePlan (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", plan: "FREE" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .post("/provisioning/instances/billing")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.changePlan({
                handle: "handle",
                plan: "FREE",
            });
        }).rejects.toThrow(Forum.InternalServerError);
    });

    test("regenerateApiKey (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle" };
        const rawResponseBody = { data: { handle: "handle", apiKey: "apiKey" } };
        server
            .mockEndpoint()
            .post("/provisioning/instances/api-key")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.provisioning.regenerateApiKey({
            handle: "handle",
        });
        expect(response).toEqual({
            data: {
                handle: "handle",
                apiKey: "apiKey",
            },
        });
    });

    test("regenerateApiKey (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .post("/provisioning/instances/api-key")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.regenerateApiKey({
                handle: "handle",
            });
        }).rejects.toThrow(Forum.UnauthorizedError);
    });

    test("regenerateApiKey (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .post("/provisioning/instances/api-key")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.regenerateApiKey({
                handle: "handle",
            });
        }).rejects.toThrow(Forum.NotFoundError);
    });

    test("regenerateApiKey (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .post("/provisioning/instances/api-key")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.regenerateApiKey({
                handle: "handle",
            });
        }).rejects.toThrow(Forum.InternalServerError);
    });

    test("getUsage (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            data: {
                handle: "handle",
                period: "period",
                apiRequests: 1,
                storageBytes: 1,
                members: 1,
                forumUsers: 1,
                threads: 1,
                posts: 1,
            },
        };
        server
            .mockEndpoint()
            .get("/provisioning/instances/usage")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.provisioning.getUsage({
            handle: "handle",
        });
        expect(response).toEqual({
            data: {
                handle: "handle",
                period: "period",
                apiRequests: 1,
                storageBytes: 1,
                members: 1,
                forumUsers: 1,
                threads: 1,
                posts: 1,
            },
        });
    });

    test("getUsage (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .get("/provisioning/instances/usage")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.getUsage({
                handle: "handle",
            });
        }).rejects.toThrow(Forum.UnauthorizedError);
    });

    test("getUsage (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .get("/provisioning/instances/usage")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.getUsage({
                handle: "handle",
            });
        }).rejects.toThrow(Forum.NotFoundError);
    });

    test("getUsage (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .get("/provisioning/instances/usage")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.getUsage({
                handle: "handle",
            });
        }).rejects.toThrow(Forum.InternalServerError);
    });

    test("listTeam (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            data: { handle: "handle", members: [{ id: "id", email: "email", role: "MEMBER", status: "PENDING" }] },
        };
        server
            .mockEndpoint()
            .get("/provisioning/instances/team")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.provisioning.listTeam({
            handle: "handle",
        });
        expect(response).toEqual({
            data: {
                handle: "handle",
                members: [
                    {
                        id: "id",
                        email: "email",
                        role: "MEMBER",
                        status: "PENDING",
                    },
                ],
            },
        });
    });

    test("listTeam (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .get("/provisioning/instances/team")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.listTeam({
                handle: "handle",
            });
        }).rejects.toThrow(Forum.UnauthorizedError);
    });

    test("listTeam (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .get("/provisioning/instances/team")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.listTeam({
                handle: "handle",
            });
        }).rejects.toThrow(Forum.NotFoundError);
    });

    test("listTeam (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .get("/provisioning/instances/team")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.listTeam({
                handle: "handle",
            });
        }).rejects.toThrow(Forum.InternalServerError);
    });

    test("inviteTeam (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", members: [{ email: "email" }] };
        const rawResponseBody = { data: { invited: ["invited"] } };
        server
            .mockEndpoint()
            .post("/provisioning/instances/team")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.provisioning.inviteTeam({
            handle: "handle",
            members: [
                {
                    email: "email",
                },
            ],
        });
        expect(response).toEqual({
            data: {
                invited: ["invited"],
            },
        });
    });

    test("inviteTeam (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", members: [{ email: "email" }, { email: "email" }] };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .post("/provisioning/instances/team")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.inviteTeam({
                handle: "handle",
                members: [
                    {
                        email: "email",
                    },
                    {
                        email: "email",
                    },
                ],
            });
        }).rejects.toThrow(Forum.BadRequestError);
    });

    test("inviteTeam (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", members: [{ email: "email" }, { email: "email" }] };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .post("/provisioning/instances/team")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.inviteTeam({
                handle: "handle",
                members: [
                    {
                        email: "email",
                    },
                    {
                        email: "email",
                    },
                ],
            });
        }).rejects.toThrow(Forum.UnauthorizedError);
    });

    test("inviteTeam (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", members: [{ email: "email" }, { email: "email" }] };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .post("/provisioning/instances/team")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.inviteTeam({
                handle: "handle",
                members: [
                    {
                        email: "email",
                    },
                    {
                        email: "email",
                    },
                ],
            });
        }).rejects.toThrow(Forum.NotFoundError);
    });

    test("inviteTeam (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", members: [{ email: "email" }, { email: "email" }] };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .post("/provisioning/instances/team")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.inviteTeam({
                handle: "handle",
                members: [
                    {
                        email: "email",
                    },
                    {
                        email: "email",
                    },
                ],
            });
        }).rejects.toThrow(Forum.InternalServerError);
    });

    test("removeTeamMember (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", email: "email" };
        const rawResponseBody = { data: { removed: "removed" } };
        server
            .mockEndpoint()
            .delete("/provisioning/instances/team")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.provisioning.removeTeamMember({
            handle: "handle",
            email: "email",
        });
        expect(response).toEqual({
            data: {
                removed: "removed",
            },
        });
    });

    test("removeTeamMember (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", email: "email" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .delete("/provisioning/instances/team")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.removeTeamMember({
                handle: "handle",
                email: "email",
            });
        }).rejects.toThrow(Forum.BadRequestError);
    });

    test("removeTeamMember (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", email: "email" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .delete("/provisioning/instances/team")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.removeTeamMember({
                handle: "handle",
                email: "email",
            });
        }).rejects.toThrow(Forum.UnauthorizedError);
    });

    test("removeTeamMember (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", email: "email" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .delete("/provisioning/instances/team")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.removeTeamMember({
                handle: "handle",
                email: "email",
            });
        }).rejects.toThrow(Forum.NotFoundError);
    });

    test("removeTeamMember (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", email: "email" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .delete("/provisioning/instances/team")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.removeTeamMember({
                handle: "handle",
                email: "email",
            });
        }).rejects.toThrow(Forum.InternalServerError);
    });

    test("listDomains (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            data: { handle: "handle", domains: [{ id: "id", name: "name", createdAt: "2024-01-15T09:30:00Z" }] },
        };
        server
            .mockEndpoint()
            .get("/provisioning/instances/domains")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.provisioning.listDomains({
            handle: "handle",
        });
        expect(response).toEqual({
            data: {
                handle: "handle",
                domains: [
                    {
                        id: "id",
                        name: "name",
                        createdAt: "2024-01-15T09:30:00Z",
                    },
                ],
            },
        });
    });

    test("listDomains (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .get("/provisioning/instances/domains")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.listDomains({
                handle: "handle",
            });
        }).rejects.toThrow(Forum.UnauthorizedError);
    });

    test("listDomains (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .get("/provisioning/instances/domains")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.listDomains({
                handle: "handle",
            });
        }).rejects.toThrow(Forum.NotFoundError);
    });

    test("listDomains (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .get("/provisioning/instances/domains")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.listDomains({
                handle: "handle",
            });
        }).rejects.toThrow(Forum.InternalServerError);
    });

    test("addDomain (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", name: "name" };
        const rawResponseBody = {
            data: { id: "id", name: "name", subdomain: "subdomain", createdAt: "2024-01-15T09:30:00Z" },
        };
        server
            .mockEndpoint()
            .post("/provisioning/instances/domains")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.provisioning.addDomain({
            handle: "handle",
            name: "name",
        });
        expect(response).toEqual({
            data: {
                id: "id",
                name: "name",
                subdomain: "subdomain",
                createdAt: "2024-01-15T09:30:00Z",
            },
        });
    });

    test("addDomain (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", name: "name" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .post("/provisioning/instances/domains")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.addDomain({
                handle: "handle",
                name: "name",
            });
        }).rejects.toThrow(Forum.BadRequestError);
    });

    test("addDomain (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", name: "name" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .post("/provisioning/instances/domains")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.addDomain({
                handle: "handle",
                name: "name",
            });
        }).rejects.toThrow(Forum.UnauthorizedError);
    });

    test("addDomain (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", name: "name" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .post("/provisioning/instances/domains")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.addDomain({
                handle: "handle",
                name: "name",
            });
        }).rejects.toThrow(Forum.NotFoundError);
    });

    test("addDomain (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", name: "name" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .post("/provisioning/instances/domains")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.addDomain({
                handle: "handle",
                name: "name",
            });
        }).rejects.toThrow(Forum.InternalServerError);
    });

    test("removeDomain (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", name: "name" };
        const rawResponseBody = { data: { removed: "removed" } };
        server
            .mockEndpoint()
            .delete("/provisioning/instances/domains")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.provisioning.removeDomain({
            handle: "handle",
            name: "name",
        });
        expect(response).toEqual({
            data: {
                removed: "removed",
            },
        });
    });

    test("removeDomain (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", name: "name" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .delete("/provisioning/instances/domains")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.removeDomain({
                handle: "handle",
                name: "name",
            });
        }).rejects.toThrow(Forum.BadRequestError);
    });

    test("removeDomain (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", name: "name" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .delete("/provisioning/instances/domains")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.removeDomain({
                handle: "handle",
                name: "name",
            });
        }).rejects.toThrow(Forum.UnauthorizedError);
    });

    test("removeDomain (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", name: "name" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .delete("/provisioning/instances/domains")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.removeDomain({
                handle: "handle",
                name: "name",
            });
        }).rejects.toThrow(Forum.NotFoundError);
    });

    test("removeDomain (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", name: "name" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .delete("/provisioning/instances/domains")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.removeDomain({
                handle: "handle",
                name: "name",
            });
        }).rejects.toThrow(Forum.InternalServerError);
    });

    test("exportData (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle" };
        const rawResponseBody = {
            data: {
                summary: { handle: "handle", name: "name", createdAt: "2024-01-15T09:30:00Z", counts: { key: 1.1 } },
                export: { key: "value" },
            },
        };
        server
            .mockEndpoint()
            .post("/provisioning/instances/export")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.provisioning.exportData({
            handle: "handle",
        });
        expect(response).toEqual({
            data: {
                summary: {
                    handle: "handle",
                    name: "name",
                    createdAt: "2024-01-15T09:30:00Z",
                    counts: {
                        key: 1.1,
                    },
                },
                export: {
                    key: "value",
                },
            },
        });
    });

    test("exportData (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .post("/provisioning/instances/export")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.exportData({
                handle: "handle",
            });
        }).rejects.toThrow(Forum.UnauthorizedError);
    });

    test("exportData (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .post("/provisioning/instances/export")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.exportData({
                handle: "handle",
            });
        }).rejects.toThrow(Forum.NotFoundError);
    });

    test("exportData (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .post("/provisioning/instances/export")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.exportData({
                handle: "handle",
            });
        }).rejects.toThrow(Forum.InternalServerError);
    });

    test("listWebhooks (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            data: { handle: "handle", webhooks: [{ id: "id", url: "url", events: ["events"], active: true }] },
        };
        server
            .mockEndpoint()
            .get("/provisioning/instances/webhooks")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.provisioning.listWebhooks({
            handle: "handle",
        });
        expect(response).toEqual({
            data: {
                handle: "handle",
                webhooks: [
                    {
                        id: "id",
                        url: "url",
                        events: ["events"],
                        active: true,
                    },
                ],
            },
        });
    });

    test("listWebhooks (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .get("/provisioning/instances/webhooks")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.listWebhooks({
                handle: "handle",
            });
        }).rejects.toThrow(Forum.UnauthorizedError);
    });

    test("listWebhooks (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .get("/provisioning/instances/webhooks")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.listWebhooks({
                handle: "handle",
            });
        }).rejects.toThrow(Forum.NotFoundError);
    });

    test("listWebhooks (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .get("/provisioning/instances/webhooks")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.listWebhooks({
                handle: "handle",
            });
        }).rejects.toThrow(Forum.InternalServerError);
    });

    test("createWebhook (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", url: "url", events: ["events"] };
        const rawResponseBody = {
            data: {
                id: "id",
                url: "url",
                events: ["events"],
                active: true,
                createdAt: "2024-01-15T09:30:00Z",
                updatedAt: "2024-01-15T09:30:00Z",
            },
        };
        server
            .mockEndpoint()
            .post("/provisioning/instances/webhooks")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.provisioning.createWebhook({
            handle: "handle",
            url: "url",
            events: ["events"],
        });
        expect(response).toEqual({
            data: {
                id: "id",
                url: "url",
                events: ["events"],
                active: true,
                createdAt: "2024-01-15T09:30:00Z",
                updatedAt: "2024-01-15T09:30:00Z",
            },
        });
    });

    test("createWebhook (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", url: "url", events: ["events", "events"] };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .post("/provisioning/instances/webhooks")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.createWebhook({
                handle: "handle",
                url: "url",
                events: ["events", "events"],
            });
        }).rejects.toThrow(Forum.BadRequestError);
    });

    test("createWebhook (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", url: "url", events: ["events", "events"] };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .post("/provisioning/instances/webhooks")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.createWebhook({
                handle: "handle",
                url: "url",
                events: ["events", "events"],
            });
        }).rejects.toThrow(Forum.UnauthorizedError);
    });

    test("createWebhook (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", url: "url", events: ["events", "events"] };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .post("/provisioning/instances/webhooks")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.createWebhook({
                handle: "handle",
                url: "url",
                events: ["events", "events"],
            });
        }).rejects.toThrow(Forum.NotFoundError);
    });

    test("createWebhook (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", url: "url", events: ["events", "events"] };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .post("/provisioning/instances/webhooks")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.createWebhook({
                handle: "handle",
                url: "url",
                events: ["events", "events"],
            });
        }).rejects.toThrow(Forum.InternalServerError);
    });

    test("updateWebhook (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", webhookId: "webhookId" };
        const rawResponseBody = {
            data: {
                id: "id",
                url: "url",
                events: ["events"],
                active: true,
                createdAt: "2024-01-15T09:30:00Z",
                updatedAt: "2024-01-15T09:30:00Z",
            },
        };
        server
            .mockEndpoint()
            .put("/provisioning/instances/webhooks")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.provisioning.updateWebhook({
            handle: "handle",
            webhookId: "webhookId",
        });
        expect(response).toEqual({
            data: {
                id: "id",
                url: "url",
                events: ["events"],
                active: true,
                createdAt: "2024-01-15T09:30:00Z",
                updatedAt: "2024-01-15T09:30:00Z",
            },
        });
    });

    test("updateWebhook (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", webhookId: "webhookId" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .put("/provisioning/instances/webhooks")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.updateWebhook({
                handle: "handle",
                webhookId: "webhookId",
            });
        }).rejects.toThrow(Forum.BadRequestError);
    });

    test("updateWebhook (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", webhookId: "webhookId" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .put("/provisioning/instances/webhooks")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.updateWebhook({
                handle: "handle",
                webhookId: "webhookId",
            });
        }).rejects.toThrow(Forum.UnauthorizedError);
    });

    test("updateWebhook (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", webhookId: "webhookId" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .put("/provisioning/instances/webhooks")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.updateWebhook({
                handle: "handle",
                webhookId: "webhookId",
            });
        }).rejects.toThrow(Forum.NotFoundError);
    });

    test("updateWebhook (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", webhookId: "webhookId" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .put("/provisioning/instances/webhooks")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.updateWebhook({
                handle: "handle",
                webhookId: "webhookId",
            });
        }).rejects.toThrow(Forum.InternalServerError);
    });

    test("deleteWebhook (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", webhookId: "webhookId" };
        const rawResponseBody = { data: { deleted: "deleted" } };
        server
            .mockEndpoint()
            .delete("/provisioning/instances/webhooks")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.provisioning.deleteWebhook({
            handle: "handle",
            webhookId: "webhookId",
        });
        expect(response).toEqual({
            data: {
                deleted: "deleted",
            },
        });
    });

    test("deleteWebhook (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", webhookId: "webhookId" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .delete("/provisioning/instances/webhooks")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.deleteWebhook({
                handle: "handle",
                webhookId: "webhookId",
            });
        }).rejects.toThrow(Forum.BadRequestError);
    });

    test("deleteWebhook (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", webhookId: "webhookId" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .delete("/provisioning/instances/webhooks")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.deleteWebhook({
                handle: "handle",
                webhookId: "webhookId",
            });
        }).rejects.toThrow(Forum.UnauthorizedError);
    });

    test("deleteWebhook (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", webhookId: "webhookId" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .delete("/provisioning/instances/webhooks")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.deleteWebhook({
                handle: "handle",
                webhookId: "webhookId",
            });
        }).rejects.toThrow(Forum.NotFoundError);
    });

    test("deleteWebhook (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", webhookId: "webhookId" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .delete("/provisioning/instances/webhooks")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.deleteWebhook({
                handle: "handle",
                webhookId: "webhookId",
            });
        }).rejects.toThrow(Forum.InternalServerError);
    });

    test("getOwnership (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            data: {
                handle: "handle",
                owner: { id: "id", email: "email", name: "name" },
                creator: { id: "id", email: "email", name: "name" },
                isCurrentUserOwner: true,
            },
        };
        server
            .mockEndpoint()
            .get("/provisioning/instances/ownership")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.provisioning.getOwnership({
            handle: "handle",
        });
        expect(response).toEqual({
            data: {
                handle: "handle",
                owner: {
                    id: "id",
                    email: "email",
                    name: "name",
                },
                creator: {
                    id: "id",
                    email: "email",
                    name: "name",
                },
                isCurrentUserOwner: true,
            },
        });
    });

    test("getOwnership (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .get("/provisioning/instances/ownership")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.getOwnership({
                handle: "handle",
            });
        }).rejects.toThrow(Forum.UnauthorizedError);
    });

    test("getOwnership (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .get("/provisioning/instances/ownership")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.getOwnership({
                handle: "handle",
            });
        }).rejects.toThrow(Forum.ForbiddenError);
    });

    test("getOwnership (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .get("/provisioning/instances/ownership")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.getOwnership({
                handle: "handle",
            });
        }).rejects.toThrow(Forum.NotFoundError);
    });

    test("getOwnership (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .get("/provisioning/instances/ownership")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.getOwnership({
                handle: "handle",
            });
        }).rejects.toThrow(Forum.InternalServerError);
    });

    test("transferOwnership (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", newOwnerEmail: "newOwnerEmail" };
        const rawResponseBody = {
            data: { message: "message", instanceId: "instanceId", newOwner: { id: "id", email: "email" } },
        };
        server
            .mockEndpoint()
            .post("/provisioning/instances/ownership")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.provisioning.transferOwnership({
            handle: "handle",
            newOwnerEmail: "newOwnerEmail",
        });
        expect(response).toEqual({
            data: {
                message: "message",
                instanceId: "instanceId",
                newOwner: {
                    id: "id",
                    email: "email",
                },
            },
        });
    });

    test("transferOwnership (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", newOwnerEmail: "newOwnerEmail" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .post("/provisioning/instances/ownership")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.transferOwnership({
                handle: "handle",
                newOwnerEmail: "newOwnerEmail",
            });
        }).rejects.toThrow(Forum.BadRequestError);
    });

    test("transferOwnership (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", newOwnerEmail: "newOwnerEmail" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .post("/provisioning/instances/ownership")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.transferOwnership({
                handle: "handle",
                newOwnerEmail: "newOwnerEmail",
            });
        }).rejects.toThrow(Forum.UnauthorizedError);
    });

    test("transferOwnership (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", newOwnerEmail: "newOwnerEmail" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .post("/provisioning/instances/ownership")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.transferOwnership({
                handle: "handle",
                newOwnerEmail: "newOwnerEmail",
            });
        }).rejects.toThrow(Forum.NotFoundError);
    });

    test("transferOwnership (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { handle: "handle", newOwnerEmail: "newOwnerEmail" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .post("/provisioning/instances/ownership")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.transferOwnership({
                handle: "handle",
                newOwnerEmail: "newOwnerEmail",
            });
        }).rejects.toThrow(Forum.InternalServerError);
    });

    test("register (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { email: "email", password: "password" };
        const rawResponseBody = { data: { provisioningKey: "provisioningKey", userId: "userId", email: "email" } };
        server
            .mockEndpoint()
            .post("/provisioning/register")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.provisioning.register({
            email: "email",
            password: "password",
        });
        expect(response).toEqual({
            data: {
                provisioningKey: "provisioningKey",
                userId: "userId",
                email: "email",
            },
        });
    });

    test("register (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { email: "email", password: "mandarin" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .post("/provisioning/register")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.register({
                email: "email",
                password: "mandarin",
            });
        }).rejects.toThrow(Forum.BadRequestError);
    });

    test("register (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { email: "email", password: "mandarin" };
        const rawResponseBody = { errors: { error: { msg: "msg" } } };
        server
            .mockEndpoint()
            .post("/provisioning/register")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(409)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.register({
                email: "email",
                password: "mandarin",
            });
        }).rejects.toThrow(Forum.ConflictError);
    });

    test("register (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { email: "email", password: "mandarin" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .post("/provisioning/register")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.register({
                email: "email",
                password: "mandarin",
            });
        }).rejects.toThrow(Forum.InternalServerError);
    });

    test("login (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { email: "email", password: "password" };
        const rawResponseBody = { data: { provisioningKey: "provisioningKey", userId: "userId", email: "email" } };
        server
            .mockEndpoint()
            .post("/provisioning/login")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.provisioning.login({
            email: "email",
            password: "password",
        });
        expect(response).toEqual({
            data: {
                provisioningKey: "provisioningKey",
                userId: "userId",
                email: "email",
            },
        });
    });

    test("login (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { email: "email", password: "password" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .post("/provisioning/login")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.login({
                email: "email",
                password: "password",
            });
        }).rejects.toThrow(Forum.UnauthorizedError);
    });

    test("login (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new ForumClient({
            maxRetries: 0,
            apiKey: "test",
            provisioningKey: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { email: "email", password: "password" };
        const rawResponseBody = { error: { code: "code", message: "message" } };
        server
            .mockEndpoint()
            .post("/provisioning/login")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.provisioning.login({
                email: "email",
                password: "password",
            });
        }).rejects.toThrow(Forum.InternalServerError);
    });
});
